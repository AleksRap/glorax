{"version":3,"sources":["script.js"],"names":["document","addEventListener","screenWidth","documentElement","clientWidth","arrMenuItems","querySelectorAll","arrMobileMenuItems","arrYPositionAnchor","map","id","headerHeight","querySelector","clientHeight","window","pageYOffset","concat","getBoundingClientRect","top","currentScroll","scrollTop","index","i","length","lastAnchor","body","scrollHeight","arrIdAnchor","classList","add","btnCloseMobileMenu","btnModalMobile","mobileMenu","btnMobile","remove","event","target","closest","Modal","selectorBtnOpen","cardBtn","card","toggle","header","transferNavbarSecond","slidesPerView","initialSlide","delay","speed","Swiper","loop","el","anchors","forEach","anchor","preventDefault","yOffset","href","replace","hash","requestAnimationFrame","startTimestamp","step","timestamp","currentTimestamp","topPosition","directionScroll","Math","scrollTo","stopPosition","input","mask","Layouts","wrapImg","GalleryCards","ManagementEvents","data","arr","push","fn","item","removeEventListener","splice","_classCallCheck","this","arrEvents","_modal","getElementById","idModal","_modalWindow","_btnsOpen","_btnClose","bind","btn","addEventToArr","_this","open","close","removeEvents","pos","elem","range","setSelectionRange","createTextRange","collapse","moveEnd","matrix","def","val","value","test","str","charAt","type","setCursorPosition","_allBlock","_wrap","_btnAbout","_btnLayouts","_about","_rowsWrap","_images","_body","removeAttribute","setAttribute","clickRow","_toConsumableArray","_closeAllCards","children","_allCards","contains","hideBlock","showBlock","_this2","_toggleBlock","_layouts","block","changeLayout","_gallery","_render","_bind","refreshFsLightbox","insertAdjacentHTML","_generateTemplate","_this3","sections","section","child","btns","img","childElementCount","links","src","split","location","origin","join","sectionTemplate","ymaps","ready","myMap","Map","center","zoom","JSON","parse","textContent","arrInfo","_ref","name","address","coordinates","geoObjects","Placemark","hintLayout","balloonContentHeader","balloonContentFooter","iconLayout","iconImageHref","iconImageSize","iconImageOffset","iconContentOffset"],"mappings":"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","file":"script.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n  const screenWidth = document.documentElement.clientWidth;\r\n\r\n\r\n  /** Выделение пунктов меню в зависимости от позиции скролла */\r\n  const arrIdAnchor = ['projects', 'about-us', 'map', 'rooms'];\r\n  const arrMenuItems = document.querySelectorAll('.nav__item');\r\n  const arrMobileMenuItems = document.querySelectorAll('.nav__mobile-item');\r\n  const arrYPositionAnchor = arrIdAnchor.map(id => {\r\n    const headerHeight = document.querySelector('.header').clientHeight;\r\n    return window.pageYOffset + document.querySelector(`#${id}`).getBoundingClientRect().top - headerHeight;\r\n  });\r\n\r\n  window.addEventListener('scroll', () => {\r\n    const currentScroll = document.documentElement.scrollTop;\r\n    let index = null;\r\n\r\n    for (let i = 0; i < arrYPositionAnchor.length; i ++) {\r\n      const lastAnchor = arrYPositionAnchor[i + 1] || document.body.scrollHeight;\r\n\r\n      if (currentScroll >= arrYPositionAnchor[i] && currentScroll < lastAnchor) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < arrMenuItems.length; i++) {\r\n      arrMenuItems[i].classList.remove('select');\r\n      arrMobileMenuItems[i].classList.remove('select');\r\n    }\r\n\r\n    if (index !== null) {\r\n      arrMenuItems[index].classList.add('select');\r\n      arrMobileMenuItems[index].classList.add('select');\r\n    }\r\n  });\r\n\r\n\r\n  /** Мобильное меню */\r\n  const btnMobile = document.querySelector('[data-mobile-nav=\"open\"]');\r\n  const btnCloseMobileMenu = document.querySelector('[data-mobile-nav=\"close\"]');\r\n  const btnModalMobile = document.querySelector('.nav__callback-btn_mobile');\r\n  const mobileMenu = document.querySelector('.nav__mobile-list-wrap');\r\n\r\n  btnMobile.addEventListener('click', () => {\r\n    mobileMenu.classList.add('open');\r\n  });\r\n  btnCloseMobileMenu.addEventListener('click', () => {\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n  btnModalMobile.addEventListener('click', () => {\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n  mobileMenu.addEventListener('click', event => {\r\n    const link = event.target.closest('.nav__mobile-link');\r\n    if (!link) return;\r\n\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n  window.addEventListener('click', event => {\r\n    const link = event.target.closest('.nav__mobile-list-wrap');\r\n    const btnMobile = event.target.closest('[data-mobile-nav=\"open\"]');\r\n    if (link || btnMobile) return;\r\n\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n\r\n\r\n  /** Модалка */\r\n  new Modal({\r\n    idModal: 'modal-callback',\r\n    selectorBtnOpen: '[data-open-modal]'\r\n  });\r\n\r\n\r\n  /** Открытие/закрытие карточек проектов на мобильных */\r\n  if (screenWidth < 1000) {\r\n    const cards = document.querySelector('.projects__cards');\r\n\r\n    cards.addEventListener('click', event => {\r\n      const card = event.target.closest('.card-real-estate');\r\n      if (!card) return;\r\n\r\n      const cardBtn = card.querySelector('[data-btn-card=\"toggle\"]');\r\n\r\n      card.classList.toggle('open');\r\n      cardBtn.classList.toggle('open');\r\n    })\r\n  }\r\n\r\n\r\n  /** Прилипание меню после прокрутки */\r\n  const header = document.querySelector('.header');\r\n  const headerHeight = header.clientHeight;\r\n\r\n  function transferNavbarSecond() {\r\n    window.pageYOffset > headerHeight\r\n      ? header.classList.add('header_color')\r\n      : header.classList.remove('header_color');\r\n  }\r\n\r\n  transferNavbarSecond();\r\n  window.addEventListener('scroll', transferNavbarSecond);\r\n\r\n\r\n  /** Инициализация слайдеров swiper */\r\n  new Swiper('.main-screen__swiper-container', {\r\n    slidesPerView: 1,\r\n    initialSlide: 0,\r\n    loop: true,\r\n    autoplay: {\r\n      delay: 6000,\r\n    },\r\n    speed: 1500,\r\n    pagination: {\r\n      el: '.swiper-pagination',\r\n      clickable: true,\r\n    }\r\n  });\r\n\r\n\r\n  /** Плавная прокрутка до якоря */\r\n  const anchors = document.querySelectorAll('[href^=\"#\"]');\r\n  const speed = 0.3;\r\n\r\n  if (anchors.length) {\r\n    anchors.forEach(anchor => {\r\n      anchor.addEventListener('click', event => {\r\n        event.preventDefault();\r\n\r\n        const yOffset = window.pageYOffset;\r\n        const hash = event.target.href.replace(/[^#]*(.*)/, '$1');\r\n        const topPosition = document.querySelector(hash).getBoundingClientRect().top;\r\n\r\n        let startTimestamp = null;\r\n\r\n        requestAnimationFrame(step);\r\n\r\n        function step(timestamp) {\r\n          if (startTimestamp === null) startTimestamp = timestamp;\r\n          const currentTimestamp = timestamp - startTimestamp;\r\n          const headerHeight = document.querySelector('.header').clientHeight;\r\n          const stopPosition =  yOffset + topPosition - headerHeight;\r\n\r\n          const directionScroll =\r\n            topPosition < 0\r\n              ? Math.max(yOffset - currentTimestamp/speed, stopPosition)\r\n              : Math.min(yOffset + currentTimestamp/speed, stopPosition);\r\n\r\n          window.scrollTo(0, directionScroll);\r\n\r\n          directionScroll !== stopPosition && requestAnimationFrame(step);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  /** Маска номера телефона на поля. Maskedinput */\r\n  const input = document.querySelector('[data-input=\"tel\"]');\r\n  input.addEventListener(\"input\", mask);\r\n  input.addEventListener(\"focus\", mask);\r\n  input.addEventListener(\"blur\", mask);\r\n\r\n\r\n  /** Планировки */\r\n  document.querySelectorAll('.card-tower').forEach(card => new Layouts(card));\r\n\r\n\r\n  /** Галереи в карточках ЖК */\r\n  document.querySelectorAll('.card-tower__img').forEach(wrapImg => new GalleryCards(wrapImg));\r\n});\r\n\r\n\r\n/** Управляем событиями */\r\nclass ManagementEvents {\r\n\r\n  /**\r\n   * На входе принимаем объект с параметрами\r\n   * arr   - массив куда сохраняем события\r\n   * el    - элемент, на который навешиваем обработчик\r\n   * event - событие (str)\r\n   * fn    - анонимная функция без вызова\r\n   * @param data\r\n   */\r\n  static addEventToArr(data) {\r\n    /** Добавляем событие в массив */\r\n    data.arr.push({el: data.el, event: data.event, fn: data.fn});\r\n\r\n    /** Вешаем слушатель */\r\n    data.el.addEventListener(data.event, data.fn);\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * На входе принимаем массив событий\r\n   * @param arr\r\n   */\r\n  static removeEvents(arr) {\r\n    /** Снимаем обработчики события */\r\n    arr.forEach(item => {\r\n      item.el.removeEventListener(item.event, item.fn)\r\n    });\r\n\r\n    /** Очищаем массив */\r\n    arr.splice(0, arr.length);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\n/** Модалка */\r\nclass Modal {\r\n  constructor(data) {\r\n    this.arrEvents = [];\r\n    this._modal = document.getElementById(data.idModal);\r\n    this._modalWindow = this._modal.querySelector('[data-modal=\"window\"]');\r\n\r\n    this._btnsOpen = document.querySelectorAll(data.selectorBtnOpen);\r\n    this._btnClose = this._modal.querySelector('[data-modal=\"close\"]');\r\n\r\n    this.bind();\r\n  }\r\n\r\n  open() {\r\n    this._modal.classList.add('modal_open');\r\n    this._modalWindow.classList.add('modal__window_open');\r\n  }\r\n  close() {\r\n    this._modal.classList.remove('modal_open');\r\n    this._modalWindow.classList.remove('modal__window_open');\r\n  }\r\n\r\n  bind() {\r\n    /**\r\n     * Открытие модалки по клику на кнопку\r\n     */\r\n    this._btnsOpen.forEach(btn => {\r\n      ManagementEvents.addEventToArr({\r\n        arr: this.arrEvents,\r\n        el: btn,\r\n        event: 'click',\r\n        fn: () => this.open()\r\n      });\r\n    });\r\n\r\n\r\n    /**\r\n     * Закрытие модалки по клику вне нее\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._modal,\r\n      event: 'click',\r\n      fn: event => !event.target.closest('[data-modal=window]') && this.close()\r\n    });\r\n\r\n    /**\r\n     * Закрытие модалки по клику на крестик\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._btnClose,\r\n      event: 'click',\r\n      fn: () => this.close()\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    ManagementEvents.removeEvents(this.arrEvents);\r\n    this._modal.remove();\r\n  }\r\n}\r\n\r\n/** Маска на телефон */\r\nfunction setCursorPosition(pos, elem) {\r\n  elem.focus();\r\n\r\n  if (elem.setSelectionRange) {\r\n    elem.setSelectionRange(pos, pos);\r\n  } else if (elem.createTextRange) {\r\n    const range = elem.createTextRange();\r\n\r\n    range.collapse(true);\r\n    range.moveEnd(\"character\", pos);\r\n    range.moveStart(\"character\", pos);\r\n    range.select()\r\n  }\r\n}\r\nfunction mask(event) {\r\n  const matrix = \"+7 (___) ___ ____\";\r\n  let i = 0;\r\n  const def = matrix.replace(/\\D/g, '');\r\n  let val = this.value.replace(/\\D/g, '');\r\n\r\n  if (def.length >= val.length) val = def;\r\n\r\n  this.value = matrix.replace(/./g, function(str) {\r\n    return /[_\\d]/.test(str) && i < val.length ? val.charAt(i++) : i >= val.length ? \"\" : str\r\n  });\r\n\r\n  if (event.type === 'blur') {\r\n    if (this.value.length === 2) this.value = ''\r\n  } else {\r\n    setCursorPosition(this.value.length, this)\r\n  }\r\n}\r\n\r\n/** Планировки */\r\nclass Layouts {\r\n  constructor(el) {\r\n    this._wrap = el;\r\n    this._allCards = document.querySelectorAll('.card-tower');\r\n\r\n    this._body = this._wrap.querySelector('.card-tower__body');\r\n    this._allBlock = this._wrap.querySelectorAll('[data-block]');\r\n\r\n    this._btnAbout = this._wrap.querySelector('[data-btn=\"about\"]');\r\n    this._btnLayouts = this._wrap.querySelector('[data-btn=\"layouts\"]');\r\n    this._btnClose = this._wrap.querySelector('[data-btn=\"close\"]');\r\n\r\n    this._about = this._wrap.querySelector('.card-tower__general-information');\r\n    this._layouts = this._wrap.querySelector('.card-tower__layouts');\r\n\r\n    this._rowsWrap = this._wrap.querySelector('.card-tower__table-row-wrap');\r\n\r\n    this._images = this._wrap.querySelector('.card-tower__table-img');\r\n\r\n    this._bind();\r\n  }\r\n\r\n  showBlock(el) {\r\n    this._closeAllCards();\r\n\r\n    this._body.removeAttribute('hidden');\r\n    this._allBlock.forEach(block => block.setAttribute('hidden', true));\r\n    el.removeAttribute('hidden');\r\n\r\n    switch (el) {\r\n      case this._about:\r\n        this._btnAbout.classList.add('card-tower__btn_active');\r\n        this._btnLayouts.classList.remove('card-tower__btn_active');\r\n        break;\r\n      default:\r\n        this._btnLayouts.classList.add('card-tower__btn_active');\r\n        this._btnAbout.classList.remove('card-tower__btn_active');\r\n        break;\r\n    }\r\n  }\r\n\r\n  hideBlock() {\r\n    this._body.setAttribute('hidden', true);\r\n    this._allBlock.forEach(block => block.removeAttribute('hidden'));\r\n\r\n    this._btnAbout.classList.remove('card-tower__btn_active');\r\n    this._btnLayouts.classList.remove('card-tower__btn_active');\r\n  }\r\n\r\n  changeLayout(event) {\r\n    const clickRow = event.target.closest('.card-tower__table-row');\r\n    if (!clickRow) return;\r\n    let index;\r\n\r\n    [...this._rowsWrap.children].forEach((el, i) => {\r\n      if (el === clickRow) index = i;\r\n      el.classList.remove('active');\r\n    });\r\n\r\n    clickRow.classList.add('active');\r\n\r\n    [...this._images.children].forEach((el, i) => {\r\n      i === index\r\n        ? el.removeAttribute('hidden')\r\n        : el.setAttribute('hidden', true);\r\n    });\r\n  }\r\n\r\n  _closeAllCards() {\r\n    this._allCards.forEach(card => {\r\n      card.querySelector('.card-tower__body').setAttribute('hidden', true);\r\n      const btns = card.querySelectorAll('.card-tower__btn');\r\n\r\n      btns.forEach(btn => btn.classList.remove('card-tower__btn_active'));\r\n    });\r\n  }\r\n\r\n  _toggleBlock(event, el) {\r\n    event.target.closest('.card-tower__btn').classList.contains('card-tower__btn_active')\r\n      ? this.hideBlock()\r\n      : this.showBlock(el);\r\n  }\r\n\r\n  _bind() {\r\n    this._btnAbout.addEventListener('click', event => this._toggleBlock(event, this._about));\r\n    this._btnLayouts.addEventListener('click', event => this._toggleBlock(event, this._layouts));\r\n    this._btnClose.addEventListener('click', () => this.hideBlock());\r\n    this._rowsWrap.addEventListener('mouseover', event => this.changeLayout(event));\r\n  }\r\n}\r\n\r\n/** Галерея внутри карточек жк */\r\nclass GalleryCards {\r\n  constructor(el) {\r\n    this._gallery = el;\r\n\r\n    this._render();\r\n    this._bind();\r\n\r\n    /** Рефрешим либу галереи */\r\n    refreshFsLightbox();\r\n  }\r\n\r\n  _render() {\r\n    this._gallery.insertAdjacentHTML('beforeend', this._generateTemplate());\r\n  }\r\n\r\n  _bind() {\r\n    const sections = this._gallery.querySelector('.card-tower__sections');\r\n    sections.addEventListener('mouseover', event => {\r\n      const section = event.target.closest('.card-tower__section');\r\n      let index;\r\n\r\n      [...sections.children].forEach((child, i) => {\r\n        if (section === child) index = i;\r\n        child.classList.remove('active');\r\n      });\r\n      [...this._gallery.children].forEach(img => img.classList.remove('active'));\r\n\r\n      section.classList.add('active');\r\n      [...this._gallery.children][index].classList.add('active');\r\n    });\r\n  }\r\n\r\n  _generateTemplate() {\r\n    const countImg = this._gallery.childElementCount;\r\n    const links = [];\r\n\r\n    [...this._gallery.children].forEach(img => links.push(img.src.split(location.origin).join('')));\r\n\r\n    return `\r\n      <div class=\"card-tower__sections\">\r\n        ${this._getTemplateSection(countImg, links)}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  _getTemplateSection(count, links) {\r\n    let sectionTemplate = '';\r\n\r\n    for (let i = 0; i < count; i++) {\r\n      sectionTemplate += `<a class=\"card-tower__section\" href=\"${links[i]}\" data-fslightbox=\"gallery\"></a>`\r\n    }\r\n\r\n    return sectionTemplate\r\n  }\r\n}\r\n\r\n/** Yandex api */\r\nymaps.ready(() => {\r\n  const myMap = new ymaps.Map('map-yandex', {\r\n    center: [59.93, 30.31],\r\n    zoom: 11\r\n  });\r\n\r\n  const arrInfo = JSON.parse(document.getElementById('json').textContent);\r\n\r\n  const header = (img, address, id) => `\r\n    <a class=\"card-map__header\" href=\"#${id}\">\r\n      <img src=\"${img}\" alt=\"${address}\">\r\n    </a>\r\n  `;\r\n\r\n  const footer = (name, address, id) => `\r\n    <a class=\"card-map__footer\" href=\"#${id}\">\r\n      <h2 class=\"card-map__title\">${name}</h2>\r\n      <p class=\"card-map__address\">${address}</p>\r\n    </a>\r\n  `;\r\n\r\n  arrInfo.forEach(({ name, coordinates, address, img, id }) => {\r\n    myMap.geoObjects.add(new ymaps.Placemark(coordinates, {\r\n      hintLayout: name,\r\n      balloonContentHeader: header(img, id),\r\n      balloonContentFooter: footer(name, address, id),\r\n    }, {\r\n      iconLayout: 'default#imageWithContent',\r\n      iconImageHref: 'images/other/point-map.png',\r\n      iconImageSize: [34, 43],\r\n      iconImageOffset: [-17, -43],\r\n      iconContentOffset: [17, 50]\r\n    }));\r\n  });\r\n});\r\n"]}