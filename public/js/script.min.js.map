{"version":3,"sources":["script.js"],"names":["document","addEventListener","screenWidth","documentElement","clientWidth","arrMenuItems","querySelectorAll","arrMobileMenuItems","arrYPositionAnchor","map","id","headerHeight","querySelector","clientHeight","window","pageYOffset","concat","getBoundingClientRect","top","currentScroll","scrollTop","index","i","length","lastAnchor","body","scrollHeight","arrIdAnchor","classList","add","btnCloseMobileMenu","btnModalMobile","mobileMenu","btnMobile","remove","event","target","closest","Modal","selectorBtnOpen","cardBtn","card","toggle","header","transferNavbarSecond","slidesPerView","initialSlide","delay","speed","Swiper","loop","lazy","preloadImages","anchors","forEach","anchor","preventDefault","yOffset","href","replace","hash","requestAnimationFrame","startTimestamp","step","timestamp","currentTimestamp","topPosition","directionScroll","Math","scrollTo","stopPosition","input","mask","Layouts","wrapImg","GalleryCards","ManagementEvents","data","el","arr","push","fn","item","removeEventListener","splice","_classCallCheck","this","arrEvents","_modal","getElementById","idModal","_modalWindow","_btnsOpen","_btnClose","bind","btn","addEventToArr","_this","open","close","removeEvents","pos","elem","range","setSelectionRange","createTextRange","collapse","moveEnd","matrix","def","val","value","test","str","charAt","type","setCursorPosition","_allBlock","_wrap","_btnAbout","_btnLayouts","_about","_rowsWrap","_images","_body","removeAttribute","setAttribute","clickRow","_toConsumableArray","_closeAllCards","children","_allCards","contains","hideBlock","showBlock","_this2","_toggleBlock","_layouts","block","changeLayout","_gallery","_render","_bind","refreshFsLightbox","insertAdjacentHTML","_generateTemplate","_this3","sections","section","child","btns","img","childElementCount","links","src","split","location","origin","join","sectionTemplate","ymaps","ready","myMap","Map","center","zoom","JSON","parse","textContent","arrInfo","_ref","name","address","coordinates","geoObjects","Placemark","hintLayout","balloonContentHeader","balloonContentFooter","iconLayout","iconImageHref","iconImageSize","iconImageOffset","iconContentOffset"],"mappings":"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","file":"script.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n  const screenWidth = document.documentElement.clientWidth;\r\n\r\n\r\n  /** Выделение пунктов меню в зависимости от позиции скролла */\r\n  const arrIdAnchor = ['projects', 'about-us', 'map', 'rooms'];\r\n  const arrMenuItems = document.querySelectorAll('.nav__item');\r\n  const arrMobileMenuItems = document.querySelectorAll('.nav__mobile-item');\r\n  const arrYPositionAnchor = arrIdAnchor.map(id => {\r\n    const headerHeight = document.querySelector('.header').clientHeight;\r\n    return window.pageYOffset + document.querySelector(`#${id}`).getBoundingClientRect().top - headerHeight;\r\n  });\r\n\r\n  window.addEventListener('scroll', () => {\r\n    const currentScroll = document.documentElement.scrollTop;\r\n    let index = null;\r\n\r\n    for (let i = 0; i < arrYPositionAnchor.length; i ++) {\r\n      const lastAnchor = arrYPositionAnchor[i + 1] || document.body.scrollHeight;\r\n\r\n      if (currentScroll >= arrYPositionAnchor[i] && currentScroll < lastAnchor) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < arrMenuItems.length; i++) {\r\n      arrMenuItems[i].classList.remove('select');\r\n      arrMobileMenuItems[i].classList.remove('select');\r\n    }\r\n\r\n    if (index !== null) {\r\n      arrMenuItems[index].classList.add('select');\r\n      arrMobileMenuItems[index].classList.add('select');\r\n    }\r\n  });\r\n\r\n\r\n  /** Мобильное меню */\r\n  const btnMobile = document.querySelector('[data-mobile-nav=\"open\"]');\r\n  const btnCloseMobileMenu = document.querySelector('[data-mobile-nav=\"close\"]');\r\n  const btnModalMobile = document.querySelector('.nav__callback-btn_mobile');\r\n  const mobileMenu = document.querySelector('.nav__mobile-list-wrap');\r\n\r\n  btnMobile.addEventListener('click', () => {\r\n    mobileMenu.classList.add('open');\r\n  });\r\n  btnCloseMobileMenu.addEventListener('click', () => {\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n  btnModalMobile.addEventListener('click', () => {\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n  mobileMenu.addEventListener('click', event => {\r\n    const link = event.target.closest('.nav__mobile-link');\r\n    if (!link) return;\r\n\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n  window.addEventListener('click', event => {\r\n    const link = event.target.closest('.nav__mobile-list-wrap');\r\n    const btnMobile = event.target.closest('[data-mobile-nav=\"open\"]');\r\n    if (link || btnMobile) return;\r\n\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n\r\n\r\n  /** Модалка */\r\n  new Modal({\r\n    idModal: 'modal-callback',\r\n    selectorBtnOpen: '[data-open-modal]'\r\n  });\r\n\r\n\r\n  /** Открытие/закрытие карточек проектов на мобильных */\r\n  if (screenWidth < 1000) {\r\n    const cards = document.querySelector('.projects__cards');\r\n\r\n    cards.addEventListener('click', event => {\r\n      const card = event.target.closest('.card-real-estate');\r\n      if (!card) return;\r\n\r\n      const cardBtn = card.querySelector('[data-btn-card=\"toggle\"]');\r\n\r\n      card.classList.toggle('open');\r\n      cardBtn.classList.toggle('open');\r\n    })\r\n  }\r\n\r\n\r\n  /** Прилипание меню после прокрутки */\r\n  const header = document.querySelector('.header');\r\n  const headerHeight = header.clientHeight;\r\n\r\n  function transferNavbarSecond() {\r\n    window.pageYOffset > headerHeight\r\n      ? header.classList.add('header_color')\r\n      : header.classList.remove('header_color');\r\n  }\r\n\r\n  transferNavbarSecond();\r\n  window.addEventListener('scroll', transferNavbarSecond);\r\n\r\n\r\n  /** Инициализация слайдеров swiper */\r\n  new Swiper('.main-screen__swiper-container', {\r\n    slidesPerView: 1,\r\n    initialSlide: 0,\r\n    loop: true,\r\n    autoplay: {\r\n      delay: 6000,\r\n    },\r\n    speed: 1500,\r\n    pagination: {\r\n      el: '.swiper-pagination',\r\n      clickable: true,\r\n    },\r\n    preloadImages: false,\r\n    lazy: true,\r\n    loadOnTransitionStart: true\r\n  });\r\n\r\n\r\n  /** Плавная прокрутка до якоря */\r\n  const anchors = document.querySelectorAll('[href^=\"#\"]');\r\n  const speed = 0.3;\r\n\r\n  if (anchors.length) {\r\n    anchors.forEach(anchor => {\r\n      anchor.addEventListener('click', event => {\r\n        event.preventDefault();\r\n\r\n        const yOffset = window.pageYOffset;\r\n        const hash = event.target.href.replace(/[^#]*(.*)/, '$1');\r\n        const topPosition = document.querySelector(hash).getBoundingClientRect().top;\r\n\r\n        let startTimestamp = null;\r\n\r\n        requestAnimationFrame(step);\r\n\r\n        function step(timestamp) {\r\n          if (startTimestamp === null) startTimestamp = timestamp;\r\n          const currentTimestamp = timestamp - startTimestamp;\r\n          const headerHeight = document.querySelector('.header').clientHeight;\r\n          const stopPosition =  yOffset + topPosition - headerHeight;\r\n\r\n          const directionScroll =\r\n            topPosition < 0\r\n              ? Math.max(yOffset - currentTimestamp/speed, stopPosition)\r\n              : Math.min(yOffset + currentTimestamp/speed, stopPosition);\r\n\r\n          window.scrollTo(0, directionScroll);\r\n\r\n          directionScroll !== stopPosition && requestAnimationFrame(step);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  /** Маска номера телефона на поля. Maskedinput */\r\n  const input = document.querySelector('[data-input=\"tel\"]');\r\n  input.addEventListener(\"input\", mask);\r\n  input.addEventListener(\"focus\", mask);\r\n  input.addEventListener(\"blur\", mask);\r\n\r\n\r\n  /** Планировки */\r\n  document.querySelectorAll('.card-tower').forEach(card => new Layouts(card));\r\n\r\n\r\n  /** Галереи в карточках ЖК */\r\n  document.querySelectorAll('.card-tower__img').forEach(wrapImg => new GalleryCards(wrapImg));\r\n});\r\n\r\n\r\n/** Управляем событиями */\r\nclass ManagementEvents {\r\n\r\n  /**\r\n   * На входе принимаем объект с параметрами\r\n   * arr   - массив куда сохраняем события\r\n   * el    - элемент, на который навешиваем обработчик\r\n   * event - событие (str)\r\n   * fn    - анонимная функция без вызова\r\n   * @param data\r\n   */\r\n  static addEventToArr(data) {\r\n    /** Добавляем событие в массив */\r\n    data.arr.push({el: data.el, event: data.event, fn: data.fn});\r\n\r\n    /** Вешаем слушатель */\r\n    data.el.addEventListener(data.event, data.fn);\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * На входе принимаем массив событий\r\n   * @param arr\r\n   */\r\n  static removeEvents(arr) {\r\n    /** Снимаем обработчики события */\r\n    arr.forEach(item => {\r\n      item.el.removeEventListener(item.event, item.fn)\r\n    });\r\n\r\n    /** Очищаем массив */\r\n    arr.splice(0, arr.length);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\n/** Модалка */\r\nclass Modal {\r\n  constructor(data) {\r\n    this.arrEvents = [];\r\n    this._modal = document.getElementById(data.idModal);\r\n    this._modalWindow = this._modal.querySelector('[data-modal=\"window\"]');\r\n\r\n    this._btnsOpen = document.querySelectorAll(data.selectorBtnOpen);\r\n    this._btnClose = this._modal.querySelector('[data-modal=\"close\"]');\r\n\r\n    this.bind();\r\n  }\r\n\r\n  open() {\r\n    this._modal.classList.add('modal_open');\r\n    this._modalWindow.classList.add('modal__window_open');\r\n  }\r\n  close() {\r\n    this._modal.classList.remove('modal_open');\r\n    this._modalWindow.classList.remove('modal__window_open');\r\n  }\r\n\r\n  bind() {\r\n    /**\r\n     * Открытие модалки по клику на кнопку\r\n     */\r\n    this._btnsOpen.forEach(btn => {\r\n      ManagementEvents.addEventToArr({\r\n        arr: this.arrEvents,\r\n        el: btn,\r\n        event: 'click',\r\n        fn: () => this.open()\r\n      });\r\n    });\r\n\r\n\r\n    /**\r\n     * Закрытие модалки по клику вне нее\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._modal,\r\n      event: 'click',\r\n      fn: event => !event.target.closest('[data-modal=window]') && this.close()\r\n    });\r\n\r\n    /**\r\n     * Закрытие модалки по клику на крестик\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._btnClose,\r\n      event: 'click',\r\n      fn: () => this.close()\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    ManagementEvents.removeEvents(this.arrEvents);\r\n    this._modal.remove();\r\n  }\r\n}\r\n\r\n/** Маска на телефон */\r\nfunction setCursorPosition(pos, elem) {\r\n  elem.focus();\r\n\r\n  if (elem.setSelectionRange) {\r\n    elem.setSelectionRange(pos, pos);\r\n  } else if (elem.createTextRange) {\r\n    const range = elem.createTextRange();\r\n\r\n    range.collapse(true);\r\n    range.moveEnd(\"character\", pos);\r\n    range.moveStart(\"character\", pos);\r\n    range.select()\r\n  }\r\n}\r\nfunction mask(event) {\r\n  const matrix = \"+7 (___) ___ ____\";\r\n  let i = 0;\r\n  const def = matrix.replace(/\\D/g, '');\r\n  let val = this.value.replace(/\\D/g, '');\r\n\r\n  if (def.length >= val.length) val = def;\r\n\r\n  this.value = matrix.replace(/./g, function(str) {\r\n    return /[_\\d]/.test(str) && i < val.length ? val.charAt(i++) : i >= val.length ? \"\" : str\r\n  });\r\n\r\n  if (event.type === 'blur') {\r\n    if (this.value.length === 2) this.value = ''\r\n  } else {\r\n    setCursorPosition(this.value.length, this)\r\n  }\r\n}\r\n\r\n/** Планировки */\r\nclass Layouts {\r\n  constructor(el) {\r\n    this._wrap = el;\r\n    this._allCards = document.querySelectorAll('.card-tower');\r\n\r\n    this._body = this._wrap.querySelector('.card-tower__body');\r\n    this._allBlock = this._wrap.querySelectorAll('[data-block]');\r\n\r\n    this._btnAbout = this._wrap.querySelector('[data-btn=\"about\"]');\r\n    this._btnLayouts = this._wrap.querySelector('[data-btn=\"layouts\"]');\r\n    this._btnClose = this._wrap.querySelector('[data-btn=\"close\"]');\r\n\r\n    this._about = this._wrap.querySelector('.card-tower__general-information');\r\n    this._layouts = this._wrap.querySelector('.card-tower__layouts');\r\n\r\n    this._rowsWrap = this._wrap.querySelector('.card-tower__table-row-wrap');\r\n\r\n    this._images = this._wrap.querySelector('.card-tower__table-img');\r\n\r\n    this._bind();\r\n  }\r\n\r\n  showBlock(el) {\r\n    this._closeAllCards();\r\n\r\n    this._body.removeAttribute('hidden');\r\n    this._allBlock.forEach(block => block.setAttribute('hidden', true));\r\n    el.removeAttribute('hidden');\r\n\r\n    switch (el) {\r\n      case this._about:\r\n        this._btnAbout.classList.add('card-tower__btn_active');\r\n        this._btnLayouts.classList.remove('card-tower__btn_active');\r\n        break;\r\n      default:\r\n        this._btnLayouts.classList.add('card-tower__btn_active');\r\n        this._btnAbout.classList.remove('card-tower__btn_active');\r\n        break;\r\n    }\r\n  }\r\n\r\n  hideBlock() {\r\n    this._body.setAttribute('hidden', true);\r\n    this._allBlock.forEach(block => block.removeAttribute('hidden'));\r\n\r\n    this._btnAbout.classList.remove('card-tower__btn_active');\r\n    this._btnLayouts.classList.remove('card-tower__btn_active');\r\n  }\r\n\r\n  changeLayout(event) {\r\n    const clickRow = event.target.closest('.card-tower__table-row');\r\n    if (!clickRow) return;\r\n    let index;\r\n\r\n    [...this._rowsWrap.children].forEach((el, i) => {\r\n      if (el === clickRow) index = i;\r\n      el.classList.remove('active');\r\n    });\r\n\r\n    clickRow.classList.add('active');\r\n\r\n    [...this._images.children].forEach((el, i) => {\r\n      i === index\r\n        ? el.removeAttribute('hidden')\r\n        : el.setAttribute('hidden', true);\r\n    });\r\n  }\r\n\r\n  _closeAllCards() {\r\n    this._allCards.forEach(card => {\r\n      card.querySelector('.card-tower__body').setAttribute('hidden', true);\r\n      const btns = card.querySelectorAll('.card-tower__btn');\r\n\r\n      btns.forEach(btn => btn.classList.remove('card-tower__btn_active'));\r\n    });\r\n  }\r\n\r\n  _toggleBlock(event, el) {\r\n    event.target.closest('.card-tower__btn').classList.contains('card-tower__btn_active')\r\n      ? this.hideBlock()\r\n      : this.showBlock(el);\r\n  }\r\n\r\n  _bind() {\r\n    this._btnAbout.addEventListener('click', event => this._toggleBlock(event, this._about));\r\n    this._btnLayouts.addEventListener('click', event => this._toggleBlock(event, this._layouts));\r\n    this._btnClose.addEventListener('click', () => this.hideBlock());\r\n    this._rowsWrap.addEventListener('mouseover', event => this.changeLayout(event));\r\n  }\r\n}\r\n\r\n/** Галерея внутри карточек жк */\r\nclass GalleryCards {\r\n  constructor(el) {\r\n    this._gallery = el;\r\n\r\n    this._render();\r\n    this._bind();\r\n\r\n    /** Рефрешим либу галереи */\r\n    refreshFsLightbox();\r\n  }\r\n\r\n  _render() {\r\n    this._gallery.insertAdjacentHTML('beforeend', this._generateTemplate());\r\n  }\r\n\r\n  _bind() {\r\n    const sections = this._gallery.querySelector('.card-tower__sections');\r\n    sections.addEventListener('mouseover', event => {\r\n      const section = event.target.closest('.card-tower__section');\r\n      let index;\r\n\r\n      [...sections.children].forEach((child, i) => {\r\n        if (section === child) index = i;\r\n        child.classList.remove('active');\r\n      });\r\n      [...this._gallery.children].forEach(img => img.classList.remove('active'));\r\n\r\n      section.classList.add('active');\r\n      [...this._gallery.children][index].classList.add('active');\r\n    });\r\n  }\r\n\r\n  _generateTemplate() {\r\n    const countImg = this._gallery.childElementCount;\r\n    const links = [];\r\n\r\n    [...this._gallery.children].forEach(img => links.push(img.src.split(location.origin).join('')));\r\n\r\n    return `\r\n      <div class=\"card-tower__sections\">\r\n        ${this._getTemplateSection(countImg, links)}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  _getTemplateSection(count, links) {\r\n    let sectionTemplate = '';\r\n\r\n    for (let i = 0; i < count; i++) {\r\n      sectionTemplate += `<a class=\"card-tower__section\" href=\"${links[i]}\" data-fslightbox=\"gallery\"></a>`\r\n    }\r\n\r\n    return sectionTemplate\r\n  }\r\n}\r\n\r\n/** Yandex api */\r\nymaps.ready(() => {\r\n  const myMap = new ymaps.Map('map-yandex', {\r\n    center: [59.93, 30.31],\r\n    zoom: 11\r\n  });\r\n\r\n  const arrInfo = JSON.parse(document.getElementById('json').textContent);\r\n\r\n  const header = (img, address, id) => `\r\n    <a class=\"card-map__header\" href=\"#${id}\">\r\n      <img src=\"${img}\" alt=\"${address}\">\r\n    </a>\r\n  `;\r\n\r\n  const footer = (name, address, id) => `\r\n    <a class=\"card-map__footer\" href=\"#${id}\">\r\n      <h2 class=\"card-map__title\">${name}</h2>\r\n      <p class=\"card-map__address\">${address}</p>\r\n    </a>\r\n  `;\r\n\r\n  arrInfo.forEach(({ name, coordinates, address, img, id }) => {\r\n    myMap.geoObjects.add(new ymaps.Placemark(coordinates, {\r\n      hintLayout: name,\r\n      balloonContentHeader: header(img, id),\r\n      balloonContentFooter: footer(name, address, id),\r\n    }, {\r\n      iconLayout: 'default#imageWithContent',\r\n      iconImageHref: 'images/other/point-map.png',\r\n      iconImageSize: [34, 43],\r\n      iconImageOffset: [-17, -43],\r\n      iconContentOffset: [17, 50]\r\n    }));\r\n  });\r\n});"]}