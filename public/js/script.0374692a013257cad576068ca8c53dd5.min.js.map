{"version":3,"sources":["script.js"],"names":["document","addEventListener","screenWidth","documentElement","clientWidth","arrMenuItems","querySelectorAll","arrMobileMenuItems","arrYPositionAnchor","map","id","headerHeight","querySelector","clientHeight","window","pageYOffset","concat","getBoundingClientRect","top","currentScroll","scrollTop","index","i","length","lastAnchor","body","scrollHeight","arrIdAnchor","classList","add","btnCloseMobileMenu","btnModalMobile","mobileMenu","btnMobile","remove","event","target","closest","Modal","selectorBtnOpen","modalSendSuccess","idModal","card","toggle","cards","header","transferNavbarSecond","Swiper","initialSlide","loop","speed","pagination","slidesPerView","delay","el","clickable","anchors","forEach","anchor","preventDefault","hash","href","replace","requestAnimationFrame","startTimestamp","step","timestamp","currentTimestamp","yOffset","topPosition","directionScroll","Math","scrollTo","stopPosition","input","mask","Layouts","wrapImg","GalleryCards","loader","form","name","phone","projectId","arrFormAreas","area","time","error","btn","e","value","bodySpecialForComagic","Comagic","addOfflineRequest","email","clearAreasForm","fetch","method","headers","then","response","Content-Type","status","message","stringify","open","json","_ref","_ref$message","dataLayer","Error","push","innerHTML","once","dataset","valueSelect","ManagementEvents","data","arr","fn","item","removeEventListener","_classCallCheck","this","arrEvents","_modal","getElementById","_modalWindow","_btnsOpen","_btnsClose","bind","generateEvent","_this","addEventToArr","close","btnClose","modal","textarea","eventClose","Event","bubbles","dispatchEvent","removeEvents","setCursorPosition","pos","elem","range","focus","setSelectionRange","collapse","moveEnd","moveStart","select","matrix","def","val","str","test","charAt","_allCards","_allBlock","createTextRange","_btnAbout","_wrap","_btnLayouts","_btnClose","_about","_layouts","_images","_bind","_closeAllCards","type","block","removeAttribute","clickRow","_toConsumableArray","_rowsWrap","children","setAttribute","contains","hideBlock","showBlock","_this2","_toggleBlock","changeLayout","_gallery","_index","_render","refreshFsLightbox","insertAdjacentHTML","_generateTemplate","_this3","sections","section","child","btns","img","countImg","links","src","split","location","origin","join","_getTemplateSection","count","sectionTemplate","setVariable","vh","innerHeight","ymaps","ready","myMap","Map","center","zoom","arrInfo","JSON","parse","textContent","_ref2","address","coordinates","geoObjects","Placemark","hintLayout","balloonContentHeader","balloonContentFooter","iconLayout","iconImageHref","iconImageSize","iconImageOffset","iconContentOffset","onresize"],"mappings":"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","file":"script.0374692a013257cad576068ca8c53dd5.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n  const screenWidth = document.documentElement.clientWidth;\r\n\r\n\r\n  /** Выделение пунктов меню в зависимости от позиции скролла */\r\n  const arrIdAnchor = ['projects', 'about-us', 'map', 'rooms'];\r\n  const arrMenuItems = document.querySelectorAll('.nav__item');\r\n  const arrMobileMenuItems = document.querySelectorAll('.nav__mobile-item');\r\n  const arrYPositionAnchor = arrIdAnchor.map(id => {\r\n    const headerHeight = document.querySelector('.header').clientHeight;\r\n    return window.pageYOffset + document.querySelector(`#${id}`).getBoundingClientRect().top - headerHeight;\r\n  });\r\n\r\n  window.addEventListener('scroll', () => {\r\n    const currentScroll = document.documentElement.scrollTop;\r\n    let index = null;\r\n\r\n    for (let i = 0; i < arrYPositionAnchor.length; i ++) {\r\n      const lastAnchor = arrYPositionAnchor[i + 1] || document.body.scrollHeight;\r\n\r\n      if (currentScroll >= arrYPositionAnchor[i] && currentScroll < lastAnchor) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < arrMenuItems.length; i++) {\r\n      arrMenuItems[i].classList.remove('select');\r\n      arrMobileMenuItems[i].classList.remove('select');\r\n    }\r\n\r\n    if (index !== null) {\r\n      arrMenuItems[index].classList.add('select');\r\n      arrMobileMenuItems[index].classList.add('select');\r\n    }\r\n  });\r\n\r\n\r\n  /** Мобильное меню */\r\n  const btnMobile = document.querySelector('[data-mobile-nav=\"open\"]');\r\n  const btnCloseMobileMenu = document.querySelector('[data-mobile-nav=\"close\"]');\r\n  const btnModalMobile = document.querySelector('.nav__callback-btn_mobile');\r\n  const mobileMenu = document.querySelector('.nav__mobile-list-wrap');\r\n\r\n  btnMobile.addEventListener('click', () => {\r\n    mobileMenu.classList.add('open');\r\n  });\r\n  btnCloseMobileMenu.addEventListener('click', () => {\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n  btnModalMobile.addEventListener('click', () => {\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n  mobileMenu.addEventListener('click', event => {\r\n    const link = event.target.closest('.nav__mobile-link');\r\n    if (!link) return;\r\n\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n  window.addEventListener('click', event => {\r\n    const link = event.target.closest('.nav__mobile-list-wrap');\r\n    const btnMobile = event.target.closest('[data-mobile-nav=\"open\"]');\r\n    if (link || btnMobile) return;\r\n\r\n    mobileMenu.classList.remove('open');\r\n  });\r\n\r\n\r\n  /** Модалка */\r\n  new Modal({\r\n    idModal: 'modal-callback',\r\n    selectorBtnOpen: '[data-open-modal]'\r\n  });\r\n\r\n  /** Модалка успешной отправки */\r\n  const modalSendSuccess = new Modal({\r\n    idModal: 'modal-send-success'\r\n  });\r\n\r\n\r\n  /** Открытие/закрытие карточек проектов на мобильных */\r\n  if (screenWidth < 1000) {\r\n    const cards = document.querySelector('.projects__cards');\r\n\r\n    cards.addEventListener('click', event => {\r\n      const card = event.target.closest('.card-real-estate');\r\n      if (!card) return;\r\n\r\n      card.classList.toggle('open');\r\n    })\r\n  }\r\n\r\n\r\n  /** Прилипание меню после прокрутки */\r\n  const header = document.querySelector('.header');\r\n  const headerHeight = header.clientHeight;\r\n\r\n  function transferNavbarSecond() {\r\n    window.pageYOffset > headerHeight\r\n      ? header.classList.add('header_color')\r\n      : header.classList.remove('header_color');\r\n  }\r\n\r\n  transferNavbarSecond();\r\n  window.addEventListener('scroll', transferNavbarSecond);\r\n\r\n\r\n  /** Инициализация слайдеров swiper */\r\n  new Swiper('.main-screen__swiper-container', {\r\n    slidesPerView: 1,\r\n    initialSlide: 0,\r\n    loop: true,\r\n    autoplay: {\r\n      delay: 6000,\r\n    },\r\n    speed: 1500,\r\n    pagination: {\r\n      el: '.main-screen__pagination',\r\n      clickable: true,\r\n    }\r\n  });\r\n  new Swiper('.card-tower__swiper-container', {\r\n    slidesPerView: 1,\r\n    initialSlide: 0,\r\n    loop: true,\r\n    autoplay: {\r\n      delay: 6000,\r\n    },\r\n    speed: 1500,\r\n    pagination: {\r\n      el: '.card-tower__pagination',\r\n      clickable: true,\r\n    }\r\n  });\r\n\r\n\r\n  /** Плавная прокрутка до якоря */\r\n  const anchors = document.querySelectorAll('[href^=\"#\"]');\r\n  const speed = 0.3;\r\n\r\n  anchors.forEach(anchor => {\r\n    anchor.addEventListener('click', event => {\r\n      event.preventDefault();\r\n\r\n      const yOffset = window.pageYOffset;\r\n      const hash = event.target.href.replace(/[^#]*(.*)/, '$1');\r\n      const topPosition = document.querySelector(hash).getBoundingClientRect().top;\r\n\r\n      let startTimestamp = null;\r\n\r\n      requestAnimationFrame(step);\r\n\r\n      function step(timestamp) {\r\n        if (startTimestamp === null) startTimestamp = timestamp;\r\n        const currentTimestamp = timestamp - startTimestamp;\r\n        const headerHeight = document.querySelector('.header').clientHeight;\r\n        const stopPosition =  yOffset + topPosition - headerHeight;\r\n\r\n        const directionScroll =\r\n          topPosition < 0\r\n            ? Math.max(yOffset - currentTimestamp/speed, stopPosition)\r\n            : Math.min(yOffset + currentTimestamp/speed, stopPosition);\r\n\r\n        window.scrollTo(0, directionScroll);\r\n\r\n        directionScroll !== stopPosition && requestAnimationFrame(step);\r\n      }\r\n    });\r\n  });\r\n\r\n\r\n  /** Маска номера телефона на поля. Maskedinput */\r\n  const input = document.querySelector('[data-input=\"tel\"]');\r\n  input.addEventListener(\"input\", mask);\r\n  input.addEventListener(\"focus\", mask);\r\n  input.addEventListener(\"blur\", mask);\r\n\r\n\r\n  /** Планировки */\r\n  document.querySelectorAll('.card-tower').forEach(card => new Layouts(card));\r\n\r\n\r\n  /** Галереи в карточках ЖК */\r\n  document.querySelectorAll('.card-tower__img_desktop').forEach((wrapImg, index) => new GalleryCards(wrapImg, index));\r\n\r\n\r\n  /** Форма */\r\n  const form = document.querySelector('[data-form]');\r\n  const btn = form.querySelector('[data-send]');\r\n  const error = form.querySelector('[data-form=\"error\"]');\r\n  const loader = form.querySelector('[data-loader]');\r\n\r\n  const name = form.querySelector('[data-form=\"name\"]');\r\n  const phone = form.querySelector('[data-form=\"phone\"]');\r\n  const projectId = form.querySelector('[data-form=\"project_id\"]');\r\n  const time = form.querySelector('[data-form=\"time\"]');\r\n\r\n  const arrFormAreas = [name, phone, projectId, time];\r\n  arrFormAreas.forEach(area => area.addEventListener('input', () => error.classList.remove('active')));\r\n\r\n  form.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n\r\n    btn.setAttribute('disabled', true);\r\n    loader.classList.add('active');\r\n\r\n    const body = {\r\n      name: name.value,\r\n      phone: phone.value,\r\n      projectId: projectId.value,\r\n      time: time.value\r\n    };\r\n\r\n\r\n    /**\r\n     * Объект с данными для Comagic\r\n     * @type {{phone, name, message, email: string}}\r\n     */\r\n    const bodySpecialForComagic = {\r\n      name: body.name,\r\n      email: '',\r\n      phone: body.phone,\r\n      message: body.time\r\n    }\r\n\r\n    Comagic.addOfflineRequest(bodySpecialForComagic);\r\n\r\n    function clearAreasForm() {\r\n      name.value = '';\r\n      phone.value = '';\r\n      projectId.value = '1';\r\n      time.value = '';\r\n    }\r\n\r\n    fetch('/api/request/send', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json;charset=utf-8'\r\n      },\r\n      body: JSON.stringify(body)\r\n    })\r\n      .then(response => response.json())\r\n      .then(({status, message = ''}) => {\r\n        if (status !== 'success') throw new Error(message);\r\n\r\n        modalSendSuccess.open();\r\n\r\n        clearAreasForm();\r\n\r\n        dataLayer.push({'event': 'formsuccess'});\r\n      })\r\n      .catch(e => {\r\n        error.innerHTML = `Произошла ошибка, попробуйте снова<br>(${e})`;\r\n        error.classList.add('active');\r\n      })\r\n      .finally(() => {\r\n        btn.removeAttribute('disabled');\r\n        loader.classList.remove('active');\r\n\r\n        /** Удаляем ошибку после закрытия и очищаем поля */\r\n        document.addEventListener('closeModal', () => {\r\n          error.classList.remove('active');\r\n          clearAreasForm();\r\n        }, {once: true});\r\n      });\r\n  });\r\n\r\n\r\n  /** Менять активный ЖК в селекте при нажатии заявка на бронь внутри карточки */\r\n  const btnsOrder = document.querySelectorAll('[data-value-select]');\r\n  btnsOrder.forEach((btn) => {\r\n    btn.addEventListener('click', (e) => {\r\n      projectId.value = e.target.closest('button').dataset.valueSelect;\r\n    });\r\n  });\r\n});\r\n\r\n\r\n/** Управляем событиями */\r\nclass ManagementEvents {\r\n\r\n  /**\r\n   * На входе принимаем объект с параметрами\r\n   * arr   - массив куда сохраняем события\r\n   * el    - элемент, на который навешиваем обработчик\r\n   * event - событие (str)\r\n   * fn    - анонимная функция без вызова\r\n   * @param data\r\n   */\r\n  static addEventToArr(data) {\r\n    /** Добавляем событие в массив */\r\n    data.arr.push({el: data.el, event: data.event, fn: data.fn});\r\n\r\n    /** Вешаем слушатель */\r\n    data.el.addEventListener(data.event, data.fn);\r\n\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * На входе принимаем массив событий\r\n   * @param arr\r\n   */\r\n  static removeEvents(arr) {\r\n    /** Снимаем обработчики события */\r\n    arr.forEach(item => {\r\n      item.el.removeEventListener(item.event, item.fn)\r\n    });\r\n\r\n    /** Очищаем массив */\r\n    arr.splice(0, arr.length);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\n/** Модалка */\r\nclass Modal {\r\n  constructor(data) {\r\n    this.arrEvents = [];\r\n    this._modal = document.getElementById(data.idModal);\r\n    this._modalWindow = this._modal.querySelector('[data-modal=\"window\"]');\r\n\r\n    this._btnsOpen = document.querySelectorAll(data.selectorBtnOpen);\r\n    this._btnsClose = this._modal.querySelectorAll('[data-modal=\"close\"]');\r\n\r\n    this.bind();\r\n  }\r\n\r\n  open() {\r\n    this.closeAllModals();\r\n\r\n    this._modal.classList.add('modal_open');\r\n    this._modalWindow.classList.add('modal__window_open');\r\n  }\r\n  close() {\r\n    this._modal.classList.remove('modal_open');\r\n    this._modalWindow.classList.remove('modal__window_open');\r\n\r\n    this.generateEvent();\r\n  }\r\n\r\n  bind() {\r\n    /**\r\n     * Открытие модалки по клику на кнопку\r\n     */\r\n    this._btnsOpen.forEach(btn => {\r\n      ManagementEvents.addEventToArr({\r\n        arr: this.arrEvents,\r\n        el: btn,\r\n        event: 'click',\r\n        fn: () => this.open()\r\n      });\r\n    });\r\n\r\n\r\n    /**\r\n     * Закрытие модалки по клику вне нее\r\n     */\r\n    ManagementEvents.addEventToArr({\r\n      arr: this.arrEvents,\r\n      el: this._modal,\r\n      event: 'click',\r\n      fn: event => !event.target.closest('[data-modal=window]') && this.close()\r\n    });\r\n\r\n    /**\r\n     * Закрытие модалки по клику на крестик\r\n     */\r\n    this._btnsClose.forEach(btnClose => {\r\n      ManagementEvents.addEventToArr({\r\n        arr: this.arrEvents,\r\n        el: btnClose,\r\n        event: 'click',\r\n        fn: () => this.close()\r\n      });\r\n    });\r\n  }\r\n\r\n  closeAllModals() {\r\n    [...document.querySelectorAll('.modal')].forEach(modal => {\r\n      modal.classList.remove('modal_open');\r\n\r\n      const textarea = modal.querySelector('textarea');\r\n      if (textarea) textarea.value = '';\r\n    });\r\n  }\r\n\r\n  generateEvent() {\r\n    const eventClose = new Event('closeModal', {bubbles: true});\r\n    this._btnsClose.forEach(btnClose => btnClose.dispatchEvent(eventClose));\r\n  }\r\n\r\n  destroy() {\r\n    ManagementEvents.removeEvents(this.arrEvents);\r\n    this._modal.remove();\r\n  }\r\n}\r\n\r\n/** Маска на телефон */\r\nfunction setCursorPosition(pos, elem) {\r\n  elem.focus();\r\n\r\n  if (elem.setSelectionRange) {\r\n    elem.setSelectionRange(pos, pos);\r\n  } else if (elem.createTextRange) {\r\n    const range = elem.createTextRange();\r\n\r\n    range.collapse(true);\r\n    range.moveEnd(\"character\", pos);\r\n    range.moveStart(\"character\", pos);\r\n    range.select()\r\n  }\r\n}\r\nfunction mask(event) {\r\n  const matrix = \"+7 (___) ___ ____\";\r\n  let i = 0;\r\n  const def = matrix.replace(/\\D/g, '');\r\n  let val = this.value.replace(/\\D/g, '');\r\n\r\n  if (def.length >= val.length) val = def;\r\n\r\n  this.value = matrix.replace(/./g, function(str) {\r\n    return /[_\\d]/.test(str) && i < val.length ? val.charAt(i++) : i >= val.length ? \"\" : str\r\n  });\r\n\r\n  if (event.type === 'blur') {\r\n    if (this.value.length === 2) this.value = ''\r\n  } else {\r\n    setCursorPosition(this.value.length, this)\r\n  }\r\n}\r\n\r\n/** Планировки */\r\nclass Layouts {\r\n  constructor(el) {\r\n    this._wrap = el;\r\n    this._allCards = document.querySelectorAll('.card-tower');\r\n\r\n    this._body = this._wrap.querySelector('.card-tower__body');\r\n    this._allBlock = this._wrap.querySelectorAll('[data-block]');\r\n\r\n    this._btnAbout = this._wrap.querySelector('[data-btn=\"about\"]');\r\n    this._btnLayouts = this._wrap.querySelector('[data-btn=\"layouts\"]');\r\n    this._btnClose = this._wrap.querySelector('[data-btn=\"close\"]');\r\n\r\n    this._about = this._wrap.querySelector('.card-tower__general-information');\r\n    this._layouts = this._wrap.querySelector('.card-tower__layouts');\r\n\r\n    this._rowsWrap = this._wrap.querySelector('.card-tower__table-row-wrap');\r\n\r\n    this._images = this._wrap.querySelector('.card-tower__table-img');\r\n\r\n    this._bind();\r\n  }\r\n\r\n  showBlock(el) {\r\n    this._closeAllCards();\r\n\r\n    this._body.removeAttribute('hidden');\r\n    this._allBlock.forEach(block => block.setAttribute('hidden', true));\r\n    el.removeAttribute('hidden');\r\n\r\n    switch (el) {\r\n      case this._about:\r\n        this._btnAbout.classList.add('card-tower__btn_active');\r\n        this._btnLayouts.classList.remove('card-tower__btn_active');\r\n        break;\r\n      default:\r\n        this._btnLayouts.classList.add('card-tower__btn_active');\r\n        this._btnAbout.classList.remove('card-tower__btn_active');\r\n        break;\r\n    }\r\n  }\r\n\r\n  hideBlock() {\r\n    this._body.setAttribute('hidden', true);\r\n    this._allBlock.forEach(block => block.removeAttribute('hidden'));\r\n\r\n    this._btnAbout.classList.remove('card-tower__btn_active');\r\n    this._btnLayouts.classList.remove('card-tower__btn_active');\r\n  }\r\n\r\n  changeLayout(event) {\r\n    const clickRow = event.target.closest('.card-tower__table-row');\r\n    if (!clickRow) return;\r\n    let index;\r\n\r\n    [...this._rowsWrap.children].forEach((el, i) => {\r\n      if (el === clickRow) index = i;\r\n      el.classList.remove('active');\r\n    });\r\n\r\n    clickRow.classList.add('active');\r\n\r\n    [...this._images.children].forEach((el, i) => {\r\n      i === index\r\n        ? el.removeAttribute('hidden')\r\n        : el.setAttribute('hidden', true);\r\n    });\r\n  }\r\n\r\n  _closeAllCards() {\r\n    this._allCards.forEach(card => {\r\n      card.querySelector('.card-tower__body').setAttribute('hidden', true);\r\n      const btns = card.querySelectorAll('.card-tower__btn');\r\n\r\n      btns.forEach(btn => btn.classList.remove('card-tower__btn_active'));\r\n    });\r\n  }\r\n\r\n  _toggleBlock(event, el) {\r\n    event.target.closest('.card-tower__btn').classList.contains('card-tower__btn_active')\r\n      ? this.hideBlock()\r\n      : this.showBlock(el);\r\n  }\r\n\r\n  _bind() {\r\n    this._btnAbout.addEventListener('click', event => this._toggleBlock(event, this._about));\r\n    this._btnLayouts.addEventListener('click', event => this._toggleBlock(event, this._layouts));\r\n    this._btnClose.addEventListener('click', () => this.hideBlock());\r\n    this._rowsWrap.addEventListener('mouseover', event => this.changeLayout(event));\r\n  }\r\n}\r\n\r\n/** Галерея внутри карточек жк */\r\nclass GalleryCards {\r\n  constructor(el, index) {\r\n    this._gallery = el;\r\n    this._index = index;\r\n\r\n    this._render();\r\n    this._bind();\r\n\r\n    /** Рефрешим либу галереи */\r\n    refreshFsLightbox();\r\n  }\r\n\r\n  _render() {\r\n    this._gallery.insertAdjacentHTML('beforeend', this._generateTemplate());\r\n  }\r\n\r\n  _bind() {\r\n    const sections = this._gallery.querySelector('.card-tower__sections');\r\n    sections.addEventListener('mouseover', event => {\r\n      const section = event.target.closest('.card-tower__section');\r\n      let index;\r\n\r\n      [...sections.children].forEach((child, i) => {\r\n        if (section === child) index = i;\r\n        child.classList.remove('active');\r\n      });\r\n      [...this._gallery.children].forEach(img => img.classList.remove('active'));\r\n\r\n      section.classList.add('active');\r\n      [...this._gallery.children][index].classList.add('active');\r\n    });\r\n  }\r\n\r\n  _generateTemplate() {\r\n    const countImg = this._gallery.childElementCount;\r\n    const links = [];\r\n\r\n    [...this._gallery.children].forEach(img => links.push(img.src.split(location.origin).join('')));\r\n\r\n    return `\r\n      <div class=\"card-tower__sections\">\r\n        ${this._getTemplateSection(countImg, links)}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  _getTemplateSection(count, links) {\r\n    let sectionTemplate = '';\r\n\r\n    for (let i = 0; i < count; i++) {\r\n      sectionTemplate += `<a class=\"card-tower__section\" href=\"${links[i]}\" data-fslightbox=\"gallery-${this._index}\"></a>`\r\n    }\r\n\r\n    return sectionTemplate\r\n  }\r\n}\r\n\r\n/** Yandex api */\r\nymaps.ready(() => {\r\n  const myMap = new ymaps.Map('map-yandex', {\r\n    center: [59.93, 30.31],\r\n    zoom: 11\r\n  });\r\n\r\n  const arrInfo = JSON.parse(document.getElementById('json').textContent);\r\n\r\n  const header = (img, address, id) => `\r\n    <a class=\"card-map__header\" href=\"#${id}\">\r\n      <img src=\"${img}\" alt=\"${address}\">\r\n    </a>\r\n  `;\r\n\r\n  const footer = (name, address, id) => `\r\n    <a class=\"card-map__footer\" href=\"#${id}\">\r\n      <h2 class=\"card-map__title\">${name}</h2>\r\n      <p class=\"card-map__address\">${address}</p>\r\n    </a>\r\n  `;\r\n\r\n  arrInfo.forEach(({ name, coordinates, address, img, id }) => {\r\n    myMap.geoObjects.add(new ymaps.Placemark(coordinates, {\r\n      hintLayout: name,\r\n      balloonContentHeader: header(img, id),\r\n      balloonContentFooter: footer(name, address, id),\r\n    }, {\r\n      iconLayout: 'default#imageWithContent',\r\n      iconImageHref: 'images/other/point-map.png',\r\n      iconImageSize: [34, 43],\r\n      iconImageOffset: [-17, -43],\r\n      iconContentOffset: [17, 50]\r\n    }));\r\n  });\r\n});\r\n\r\n\r\n/** Максимальная высота экрана, за вычетом всех инструментов браузера */\r\nfunction setVariable() {\r\n  const vh = window.innerHeight * 0.01;\r\n  document.documentElement.style.setProperty('--vh', `${vh}px`);\r\n}\r\nsetVariable();\r\nwindow.onresize = setVariable;\r\n"]}